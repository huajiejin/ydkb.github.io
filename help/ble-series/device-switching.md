# 多设备切换
YDKB BLE系列的所有键盘，都支持有线与蓝牙同时使用。当有线与蓝牙连接到不同设备时，可以切换输出为哪一个。

而多个蓝牙设备之间的切换，受限于使用Adafruit蓝牙固件，所以只能实现部分功能。

## USB 与 蓝牙 之间的切换
当插上USB线的时候，默认就会切换到USB连接，哪怕电脑上显示的蓝牙还是已连接。如果USB接的电脑A，蓝牙接的电脑B，那么可以使用 **BT/USB** 这个按键来切换输出到哪个电脑。 除了设置这个按键外，键盘也有按键的快捷键 **LShift+RShift+U** 来实现此操作。

## 蓝牙设备之间的切换
<font color="red" size="+1">！！务必熟知下面说明，再使用此功能！！</font>

BLE系列除Fmini(alf x3)外均已支持此功能。

设置一个如下的按键，按一下它就切换蓝牙所连接的设备。

![|180](assets/device_switching_01.jpg)

受限于Adafruit的固件，并不支持主动切换，所以这一个的实际效果就是断开当前设备，然后重新尝试连接，如果连接到另一个设备就表示连接成功，如果连接的还是当前设备，就断开继续尝试。

使用时，建议蓝牙只配对两个设备，或者说同一环境里只配对了两个设备。这时切换时就是非A即B。

具体的配对步骤是

1. 准备工作：先在所有设备上，删除已配对的这个键盘。然后键盘上按一次 <kbd>Lshift+RShift+LCtrl+R</kbd>，清除键盘上保存的配对信息。
2. 此时键盘处于未连接状态，确定你的设置A和设备B，都能搜索到键盘。
3. 设备A先连接键盘，能正常使用后，将设备A的蓝牙关闭。此时键盘蓝牙处于未连接状态，这时再用设备B连接键盘。
4. 这样就完成了YDKB的BLE系列键盘同时配对于设备A和设备B。可以在A和B的蓝牙同时开启时使用切换设备功能了。

切换时，键盘指示灯会显示连接指示，连接指示效果参考 [蓝牙开关和连接状态](ble-series/connection-status)。从设备A切换到设备B，一旦超时没连上设备B，会连接回设备A。

实际效果，测试了从iPad切换到Windows很快，但是从Windows切换到iPad，可能就需要数秒了。Mac或iPhone的情况与iPad差不多。Windows之间切换也比较快。

已知缺点：

  1. 从键盘端无法指示具体连接到了哪一个设备，只能从设备那边判断。
  2. 如果进入二级节能后，重新唤醒，A和B都在附近，它可能随机连上A或B，而不一定是之前最后连接的。
  3. 少数情况下可能一次切换不成功

除上面缺点外，其实切换设备的使用体验尚可。

## 补充说明

如果要切换的多个设备是在一个局域网的，也可以考虑使用软件KVM的方案，比如：https://github.com/debauchee/barrier

鼠标和键盘都能同时切换，并且可以共享粘贴板，只要网络不差（都连上5G的wifi或者用有线），使用体验还是极佳了。