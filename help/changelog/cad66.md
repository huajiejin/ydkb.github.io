# CAD66 固件更新记录
「+」新增， 「-」删除， 「^」升级,  「#」修复,  『 』重要

##### 2023-12-24 (DNCO)
- 「+」[修饰键组合键](app://obsidian.md/edit-keymap/mods-key.md) 或 [修饰键 | 按键](app://obsidian.md/edit-keymap/mods-tap-key.md)，其中的按键，可以设置为 音量键 或 鼠标键。即可将单个按键设置为例如: Ctrl + 滚轮上，Shift + 音量加。
- 「+」基于上一条，增加两个mac使用的按键，功能为音量增加或减少4分之1格。

##### 2023-10-07 (DNA7)
- 「+」增加支持 [修饰键 & 瞬时开启层](edit-keymap/layer-mods.md)，支持设置左或右修饰键，以及支持单按时触发一次瞬时开启层所在位置的按键。
- 「+」增加支持 [按键(k) | 修饰键](edit-keymap/mods-tap-key.md)，其作用就是按键优先，工作在非Interrupt模式下，具体见稍后文档补充说明。

##### 2023-05-03 (DN53)
- 「^」对之前的修改进行实测并且完善。
- 「^」从二级节能(包括Lock Mode)恢复时，依然保持当前的一级节能开关状态。

##### 2023-02-26 (DN2Q)
- 「^」提升一点点按键触发的速度，同时优化新的算法减少某些状态差的轴按键双击出现的可能。

##### 2023-01-24 (DN1O) (此键盘未在手边所以此固件暂未亲测，如有问题请反馈)
- 『- 』除了不再支持轴灯背光，其他的各项功能都已经到ydkb可支持的最新部分。
- 「^」适用于本键盘按键方案的 更快的首按键响应速度。
- 「^」主控与蓝牙模块之间的通讯，增加两重保险，提升可靠性。
- 「^」1: 每次主控传输命令到蓝牙前，检查之前的命令是否已经完成。
- 「^」2: 按键抬起时，会在发送后确认命令是否成功。如未成功会在下次循环再发，直至确认发送成功。

这次的蓝牙更新后，键盘这端应该不会出现按键后未弹起的情况了。

如果还遇到卡键按键未弹起现象，有可能是蓝牙命令由键盘发送后到电脑接收，这个过程中出了问题。

-   「+」增加 优先层 功能。使用瞬时开启的层，临时也被设为优先层，如果此层上有设置按键，则优先响应它，其次才根据所有的层状态从高往低查找。
-   「^」层的逻辑有些变化，把瞬间切换层和其他切换层分开来。现在逻辑上操作更直觉。

它不会破坏以往逻辑，但配合新逻辑，符合更多人对于层切换的期望。具体参看文档里关于层逻辑的新说明。

- 「+」键盘进入节能和从节能唤醒时，增加 轴灯背光(如果有) 和 RGB灯(如果有) 的淡入淡出效果。
- 「+」引入可调的防抖时间。目前只是预设了两种，NKRO按下防抖时间1ms，6KRO暂时预设是5ms。后续再加入可自定义设置。注意每次键盘重启后默认是NKRO模式，就又会回到1ms。万一部分轴体连击的可尝试临时切换到6KRO看是否有改善。
- 「+」 在可打字的地方按 <kbd>LShift+RShift+N</kbd>时，会打出数字0或6，0代表当前切换到了NKRO全键无冲模式，6代表切换到了6KRO任意6键无冲模式。
- 「^」从这个固件开始，USB模式下默认开启NKRO全键无冲，蓝牙模式下依然是6KRO。现在应该很少人使用极老的系统不支持NKRO的了。

此键盘未在手边，所以本次暂时未更新灯光部分在节能和唤醒时的淡入淡出，之后会补充更新上。

##### 中间缺一段可参考BLE系列其他键盘

##### 2020-07-16 (DK7G)
  - {^} 按键防抖升级为混合防抖，改进某些国产轴有部分连击问题。同时，减少了防抖时间，提高了按键响应速度。
  - {^} 左右Shift+N切换全键无冲时，在可打字的地方会输出0或6，0代表全键无冲，6代表6键无冲。在全键无冲模式下，防抖更激进，响应更快速，但是某些国产轴部分连击问题，可能存在。
  - [+] 左右Shift+P切换节能时，在可打字的地方会输出1或0，1代表节能开启，0代表节能关闭。

##### 2020-05-24 (DK5O)
  - [+] **LShift+RShift+V** 这组命令键，在按的时候，后面会多输出一个-0或-1，代表键盘蓝牙连接状态。
  - {#} 因为有部分人误关掉蓝牙功能，本次更新调整开关蓝牙功能的切换方式，具体见[[ble-series:connection-status|蓝牙开关和连接状态]]
  - {^} 再优化键盘模拟鼠标功能的滚轮部分，之前滚轮速度起飞了。同时USB下移动流畅度再提升一点，速度减一点。

##### 2020-03-07 (DK37)
  - {^} 大幅度提升键盘模拟鼠标功能的流畅和精准性。
  - [^] 大幅减少Send Keymap总共所花的时间。

##### 2020-02-25 (DK2O)
  - [+] 增加发送KEYMAP到ydkb.io。具体见 __[[edit-keymap:load-keymap|读取按键]]__
  - [+] LEDMAP增加指示工作模式，可用来指示当前是工作在USB模式还是蓝牙模式。
  - [^] 改进Win_Lock功能。之前只是禁用单独的设置的win键（即LWin或RWin），现在可以让所有与win相关的（包括组合键，二合一键等），都不触发win键本身。这样防止误按的效果更佳。
  - [#] 修复：在使用软件重置或者清除修饰时，最新版win10里会触发启动商店版Office(它的默认快捷键是LCtrl+LShift+LAlt+LWin)问题。

##### 2019-10-04 (DJA4)
  - [+]增加蓝牙多设备切换。具体见 __[[ble-series:device-switching|多设备切换]]__
  - [#]修复问题：重置蓝牙后初始化时，偶尔重命名未成功。
  - [+]电池服务如果不正常时，电量指示输出44或45。这个是用来辅助判断问题的。

##### 2019-09-12
  - [#]修复问题：使用完全关闭蓝牙功能后，Mac下插USB无法使用（Win下正常）。

##### 2019-09-09
  - {#}修复问题： 左右Shift+R/I/O这三个功能，使用时可能导致蓝牙重新配置或出错。
  - [+]插USB线识别的设备名，后面增加固件日期。比如今天的固件更新后，USB下识别的设备名就为CAD66 (USB_DJ99),J99分别代表年月日。

##### 2019-08-31
  - [#] 修复问题：v2.0版的PCB如果关闭了轴灯背光，可能导致RGB灯条不更新。

##### 2019-08-25
  - [^] 使用[[ble-series:connection-status|蓝牙开关和连接状态]]完全关闭蓝牙后，键盘的USB可以唤醒电脑了。
  - [ ] 有线模式下，默认由NKRO改为6KRO。默认6KRO对各种系统和硬件的兼容更好一些。

##### 2019-08-23
  - [#]修复问题：某些主板启动时如果插着线，卡bios，得拔了线才能启动。
  - [^]完善蓝牙开关功能。
  - [^]去除上次更新的1200ms的启动延迟，改为在使用有线时，重启键盘前延时，一样有效果。
  - [^]要使用YDKB Control，为配合此版本，请再次更新它(≧201908823)。

##### 2019-08-17 
  - {^} 之前版本的固件直接读取KEYMAP后，蓝牙功能相关的增强按键需要重新选择设置。
  - [+] 增加蓝牙开关功能，可以完全关闭蓝牙。具体参看：[[ble-series:connection-status|蓝牙开关和连接状态]]
  - [^] 蓝牙重命名，支持名称中有空格。需要配合使用最新版本的YDKB Control。
  - [^] Win10下插着线重启键盘，设置设备里可能没有刷新及时导致显示为“驱动程序错误”，但其实键盘使用正常。有部分用户误解为这是键盘问题，所以本次键盘启动时增加了一个1200ms的启动延迟。

##### 2019-07-31
  - [^] 从二级节能(比如超过2.5小时未使用，超过90s无连接，以及Lock Mode)唤醒时也提示蓝牙连接状态。并且，减少每次提示的闪烁时间

