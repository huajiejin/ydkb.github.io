# 全键无冲与游戏支持

一般说到全键无冲，都多少与游戏有关，所以相关的内容放在这里一起说一下。也可以当作一个简单的知识普及来看。


## 全键无冲(NKRO）

全键无冲和NKRO指的是一个东西，NKRO的全称也就是N-Key Rollover。YDKB的大部分键盘在USB模式下都支持NKRO，只是为了兼容，默认使用的是6KRO。

一般说到键盘支持USB全键无冲的时候，是指键盘能同时按下很多按键没有冲突。这个按键数一般能满足104键盘全按下了，但也不是无穷大的。选择支持全键无冲的键盘，也意味着常规使用即使没有打开全键无冲时，它也可以做到任意6键无冲，注意是任意6键，而不是最大6键。

举例来说G80-3000就不支持任意6键无冲；而G80-3494在USB模式下支持任意6键无冲，在PS2模式下则支持全键无冲。

再补充一点知识，所谓的6键无冲，是指除左右Ctrl、Shift、Alt、Win这8个修饰键外，其他的还有6个键可以同时按下。这8个修饰键，同时再和其他6个按键按下，是没有问题的。也就是非要较真的话，任意6键无冲的模式下，最多是可以同时按下8+6共计14个按键的。

> [!yddh: 提示]
> - YDKB支持的大部分键盘，默认都是6KRO的，这样兼容性更好。
> - 在USB连接下可以支持NKRO全键无冲，用 <kbd>LShift+RShift+N</kbd> 切换。
> - 蓝牙模式下始终是6KRO。

## 按键响应速度与游戏支持

说起键盘玩游戏，经常会谈到几个参数，键盘响应时间，回报率这些。我尽量简单的一下说明白，但可能细节有所不对，不要介意。

### 1 系统检查按键频率

可以理解为系统每秒钟检查多少次USB信号。它在USB2.0 Low Speed模式下最大只能达到125Hz，但是在Full Speed模式下就已经能达到1000Hz了。参考资料：https://deskthority.net/wiki/Talk:Polling_rate

如果有专门的驱动支持，不使用系统默认的USB驱动，那么还能实现更高的频率。对于客制化来说，没法满足去开发并认证专门的驱动，所以就看上限由系统USB支持决定。

### 2 键盘请求的回报率

键盘每秒钟可以给系统发送多少次信号。它个只要硬件能满足要求外，就是看固件设置的是多少。

> [!yddh: YDKB键盘回报率]
> - YDKB支持的键盘，USB下都是1000Hz。
> - BLE系列在蓝牙下使用的标准HID over GATT服务，这个应该是100到125Hz。

### 3 按键防抖时间

因为机械轴，接触的簧片是会抖动的，所以需要用软件去除这个抖动，这里需要一定的时间，这个时间的多少也是看固件设置。有些键盘使用的轴体不是很好，为了不连击，这个防抖时间可能设置得特别大，就造成能感受到的游戏延迟。

> [!yddh: YDKB键盘防抖 2.0]
> - YDKB支持的大部分键盘，已经升级到最新的混合防抖(同时针对按键按下和弹起进行防抖)。
> - 在默认6KRO的时候，按键防抖时间为5ms；在NKRO开启时，按键防抖时间为1ms。
> - NKRO开启的时候，蓝牙上虽然依然还是6KRO，但是防抖同样也是1ms。

<p></p>

> [!yddh: YDKB键盘防抖 3.0]
> - 在2022年3月开始更新的固件里，对防抖又做了改进。
> - 在2.0的混合防抖基础上，再加上了按需防抖、即时触发和去多重按键。
> - 无论在NKRO还是6KRO下，按键的触发速度最快可在0.1ms。在USB连接，1000Hz的回报率时，从按键到电脑响应到的时间可以快到1ms内。

<p></p>

> [!yddh: 关于轴体的一点建议补充]
> - 都客制化了，就没必要去将就某些不那么好的轴了。所以如果默认的5ms防抖都要连击的轴，建议换掉。
> - 如果要求更高，那么在NKRO下有连击的轴也换掉。虽然6KRO下它们也能用，但好多时候也是会因为要对它们消抖处理，实际造成的延迟就不止5ms。


### 4 按键矩阵扫描频率

这里暂时只针对需要矩阵扫描的键盘来做说明（另外还有中断式的获取按键的方式），这个就是每秒钟，可以扫描多少次按键。 

假如一个键盘虽然电脑上显示回报率是1000Hz，但是它本身按键扫描的速度没有那么快，那么，其实响应速度也是受这个拖累的。

> [!yddh: YDKB的矩阵扫描频率]
> - YDKB的一般机械轴的键盘，默认都是1000Hz。
> - 有些键盘处理器没那么强，所以当比如开启复杂RGB灯效时，可能扫描速度达不到1000Hz，但也是接近。


##  总结加补充

以上是主要的几个概念。

按键的发送过程：按下一个按键，键盘扫描到按键处于按下了，然后经过防抖，由键盘发送，再由电脑接收。

而我们通常要注意的响应速度，其实是由整个过程的多个步骤决定，只看某个单一参数是不够的。

然后补充就是，除了部分音游外，大部分游戏对键盘并没有那么高的要求。比如:

**职业选手Doinb用的REALFORCE燃风键盘用来玩CS:GO**, 参考链接:https://post.smzdm.com/p/a992049p/

![](assets/doinb_realforce.jpg)

Realforce并不是一个游戏优化的键盘，甚至于说它的性能还不如好多普通键盘。比如大额头那种Realforce，它的矩阵扫描频率就60Hz，最新的我没有详细的参数，不过如果以HHKB Classic为参考，那么矩阵扫描速度，500Hz左右。

> [!ydda: 结尾]
> - <p style="font-size: 1.2em">所以呢，比起这些参数，只要装备不是太差，人(脑子和手)更重要。</p>
