# 瀚文75 (HW75) 
## 开源地址

UF2 bootloader： https://github.com/yangdigi/uf2-stm32f103

TMK firmware: https://github.com/yangdigi/tmk_keyboard/tree/master/keyboard/hw75

## 固件更新

固件需要更新为 YDKB UF2 bootloader 或者 瀚文的 HID-BL v2.1 才能正常使用。

稚晖君提供了BL的更新程序，已经手上收到货的可以稍后参照说明更新Bootloader。

说明见： https://gitee.com/referencez/hw-75-firmware/tree/master/3.特殊操作

更新BL后。HID-BL则是下载BIN文件，然后刷新固件方式与原来是一样的（拖BIN文件到更新器上）。


## YDKB UF2-BL 和 HID-BL v2.1 的互转

如果想使用 YDKB UF2-BL，那么确定在你有完成 升级到 HID-BL 2.1后，参考下面说明进行操作。

首先这里是要互相转换的文件下载： [ydkb_uf2boot_hw75.zip](keyboards/assets/ydkb_uf2boot_hw75.zip ':ignore')

压缩包里面包括两个文件夹，需要哪个就解决出来，使用。

![|600](assets/hw75-uf2boot-files.jpg)

>  [!ydda: 注意]
> - 压缩包内的 `固件更新器v2.1.exe`，如果你的电脑提示不安全，临时关闭一下杀毒软件，再使用它。
> - 下文中提到使用固件更新器的地方，必须用压缩包里的这个版本。


##### 从 HID-BL 2.1 到 YDKB_UF2-BL

UF2-BL特点：使用UF2-BL，更新固件时不需要借助更新器，且支持macOS等其他一些系统。

文件夹里包含如下三个文件。
```
3A. UPDT_BL_APP_16K.bin
4A. ydkb_uf2boot_hw75_v231.bin
固件更新器v2.1.exe
```

操作方法是：
1. 先按Fn不放插线，键盘进入刷机模式。这时将文件 `3A. UPDT_BL_APP_16K.bin` 拖到`固件更新器v2.1`上，待烧录100%完成。
2. 先不拔线。查看 `设置 -- 蓝牙和其他设备`，最下方`更多设备和打印机设置`里，是否有名为 `UPDT-BL`的在其他设备里。
3. 如果第2步没有，那么拔掉线。再重新插上线，重新确认是不是有 `UPDT-BL` 这个设备。依然没有，那么第1步可能没有成功。再重新从第1步操作，一定要看到`UPDT-BL`这个，再进行下一步。
4. 在第2步看到有看到`UPDT-BL`了，那直接将文件 `4A. ydkb_uf2boot_hw75_v205.bin`拖到`固件更新器v2.1`上。待进度条100%完成。这样已经完成了更新到 `YDKB UF2-BL`。
5. 最后一步则是拔线，然后重新按Fn不放时插USB线，键盘进入到了UF2的刷机模式，显示为一个HW75的U盘。重新在ydkb.io网站上下载HW75的.UF2格式的固件，然后按页面说明烧录即可。


##### 从 YDKB_UF2-BL 到 HID-BL 2.1

HID-BL是HW75原带的BL，用下面方法还可以再更新回去。

文件夹里包含如下三个文件。
```
3B. UPDT_BL_APP_16K.uf2
4B. HW-BL-v2.1.bin
固件更新器v2.1.exe
```

操作方法是：
1. 先按Fn不放插线，键盘进入刷机模式。这时将文件 `3B. UPDT_BL_APP_16K.uf2` 复制到刷机模式下的显示的名为HW75的U盘里。
2. 先不拔线。查看 `设置 -- 蓝牙和其他设备`，最下方`更多设备和打印机设置`里，是否有名为 `UPDT-BL`的在其他设备里。
3. 如果第2步没有，那么拔掉线。再重新插上线，重新确认是不是有 `UPDT-BL` 这个设备。依然没有，那么第1步可能没有成功。再重新从第1步操作，一定要看到`UPDT-BL`这个，再进行下一步。
4. 在第2步看到有看到`UPDT-BL`了，那直接将文件 `4B. HW-BL-v2.1.bin`拖到`固件更新器v2.1`上。待进度条100%完成。这样已经完成了更新到 ` HID-BL 2.1`。
5. 最后一步则是拔线，然后重新按Fn不放时插USB线，键盘进入到了HID BL的刷机模式。重新在ydkb.io网站上下载HW75的.BIN格式的固件，然后用固件更新器v2.1刷入新固件。

##### 将 YDKB_UF2-BL 从 v2.0.5 升到 v2.3.1

最早提供的是UF2-BL是v2.0.5的，最新更新到v2.3.1，的变化如下
1. 增加了刷机模式下，右上角轴灯闪烁黄灯。
2. 进入刷机模式后，如果不需要刷新，可以再按一次Fn退出刷机模式。

操作方法与 HID-BL 到 UF2-BL的区别，只有第一步区别为： 
1. 先按Fn不放插线，键盘进入刷机模式。这时将文件 `3B. UPDT_BL_APP_16K.uf2` 复制到刷机模式下的显示的名为HW75的U盘里。

其他的步骤相同。