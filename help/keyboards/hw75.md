# 瀚文75 (HW75) 
## 开源地址

UF2 bootloader： https://github.com/yangdigi/uf2-stm32f103

TMK firmware: https://github.com/yangdigi/tmk_keyboard/tree/master/keyboard/hw75

## 固件更新

固件需要更新为 YDKB UF2 bootloader 或者 瀚文的 HID-BL v2.1 才能正常使用。

稚晖君提供了BL的更新程序，已经手上收到货的可以稍后参照说明更新Bootloader。

说明见： https://gitee.com/referencez/hw-75-firmware/tree/master/3.特殊操作

更新BL后。HID-BL则是下载BIN文件，然后刷新固件方式与原来是一样的（拖BIN文件到更新器上）。


## 更新到 YDKB UF2-BL 的方法

如果想使用 YDKB UF2-BL，参考下面说明进行操作。

这是需要的文件，已经分类打包好： [ydkb_uf2boot_hw75.7z](keyboards/assets/ydkb_uf2boot_hw75.7z ':ignore')

压缩包里面包括两个文件夹，这里使用 `从 HID-BL  到 YDKB_UF2-BL`。

![|600](assets/hw75-uf2boot-files.jpg)

>  [!ydda: 注意]
> - 压缩包内的 `固件更新器v2.1.exe`，如果你的电脑提示不安全，临时关闭一下杀毒软件，再使用它。
> - 下文中提到使用固件更新器的地方，必须用压缩包里的这个版本。


##### 从 HID-BL 到 YDKB_UF2-BL

UF2-BL特点：使用UF2-BL，更新固件时不需要借助更新器，且支持macOS等其他一些系统。

如果你的是先行团未更新过BL，那么大概率是 1.0的HID-BL；如果不是或自己更新过了，就是2.x。

1.0和2.x的更详细的区分方法是： 在下面第一步时， 查看 `设置 -- 蓝牙和其他设备`，最下方`更多设备和打印机设置`里。如果刷机模式下显示的名称是 STM32F HID Bootloader，就是1.0；如果显示的是 HID-BL，就是2.x。

文件夹里包含如下四个文件。
```
1A. UPDT_BL_APP_16K_for_1.0.bin
3A. UPDT_BL_APP_16K_for_2.x.bin
4A. ydkb_uf2boot_hw75_v231.bin
固件更新器v2.1.exe
```

操作方法是：
1. 先按Fn不放插线，键盘进入刷机模式。这时将文件 `1A. UPDT_BL_APP_16K.bin` 拖到`固件更新器v2.1`上，待烧录100%完成。如果你的是 HID-BL 2.x，这里就拖文件 `3A. UPDT_BL_APP_16K.bin`。
2. 先不拔线。查看 `设置 -- 蓝牙和其他设备`，最下方`更多设备和打印机设置`里，是否有名为 `UPDT-BL`的在其他设备里。
3. 如果第2步没有，那么拔掉线。再重新插上线，重新确认是不是有 `UPDT-BL` 这个设备。依然没有，那么第1步可能没有成功。再重新从第1步操作，一定要看到`UPDT-BL`这个，再进行下一步。
4. 在第2步看到有看到`UPDT-BL`了，那直接将文件 `4A. ydkb_uf2boot_hw75_v205.bin`拖到`固件更新器v2.1`上。待进度条100%完成。这样已经完成了更新到 `YDKB UF2-BL`。
5. 最后一步则是拔线，然后重新按Fn不放时插USB线，键盘进入到了UF2的刷机模式，显示为一个HW75的U盘。重新在ydkb.io网站上下载HW75的.UF2格式的固件，然后按页面说明烧录即可。

##### 将 YDKB_UF2-BL 从 v2.0.5 升到 v2.3.1

如果在更新到 YDKB UF2-BL 时，使用的是`4A. ydkb_uf2boot_hw75_v231.bin`，就不需要看这一部分。

最早提供的是UF2-BL是v2.0.5的，最新更新到v2.3.1，的变化如下
1. 增加了刷机模式下，右上角轴灯闪烁黄灯。
2. 进入刷机模式后，如果不需要刷新，可以再按一次Fn退出刷机模式。

操作方法与 HID-BL 到 UF2-BL的区别，只有第一步区别为： 
1. 先按Fn不放插线，键盘进入刷机模式。这时将文件 `3B. UPDT_BL_APP_16K.uf2` （在文件夹`从 YDKB_UF2-BL 到 HID-BL 2.1`里）复制到刷机模式下的显示的名为HW75的U盘里。

其他的步骤相同。


## 回到 HID-BL 2.1 的方法

还是使用分类打包好的文件： [ydkb_uf2boot_hw75.7z](keyboards/assets/ydkb_uf2boot_hw75.7z ':ignore')

压缩包里面包括两个文件夹，这里使用 `从 YDKB_UF2-BL 到 HID-BL 2.1`

##### 从 YDKB_UF2-BL 到 HID-BL 2.1

HID-BL是HW75原带的BL，用下面方法还可以再更新回去。

文件夹里包含如下三个文件。
```
3B. UPDT_BL_APP_16K.uf2
4B. HW-BL-v2.1.bin
固件更新器v2.1.exe
```

操作方法是：
1. 先按Fn不放插线，键盘进入刷机模式。这时将文件 `3B. UPDT_BL_APP_16K.uf2` 复制到刷机模式下的显示的名为HW75的U盘里。
2. 先不拔线。查看 `设置 -- 蓝牙和其他设备`，最下方`更多设备和打印机设置`里，是否有名为 `UPDT-BL`的在其他设备里。
3. 如果第2步没有，那么拔掉线。再重新插上线，重新确认是不是有 `UPDT-BL` 这个设备。依然没有，那么第1步可能没有成功。再重新从第1步操作，一定要看到`UPDT-BL`这个，再进行下一步。
4. 在第2步看到有看到`UPDT-BL`了，那直接将文件 `4B. HW-BL-v2.1.bin`拖到`固件更新器v2.1`上。待进度条100%完成。这样已经完成了更新到 ` HID-BL 2.1`。
5. 最后一步则是拔线，然后重新按Fn不放时插USB线，键盘进入到了HID BL的刷机模式。重新在ydkb.io网站上下载HW75的.BIN格式的固件，然后用固件更新器v2.1刷入新固件。